# 디자인 패턴

## 싱글턴 패턴

특정 클래스의 인스턴스를 하나의 객체밖에 생성하지 못하게 제한하는 디자인 패턴이다.

## 팩토리 패턴

특수 함수인 팩토리 함수를 사용하여 비슷한 객체를 많이 만들 수 있다.

비슷한 객체(동일한 속성을 공유)를 반복적으로 생성해야하는 경우에 주로 사용한다.

## 중재자(Mediator) 패턴

중재자 패턴은 객체 그룹에 대한 중앙 권한을 가진다.

## 옵저버(Observer) 패턴

event-driver 시스템을 이용한다.

특정 Subject 들을 관찰하는 Observer가 있다.

관찰자는 주제에 대해 관심을 가지고 있고, 변경사항이 있을때 알림을 받길 원한다. 

## 모듈(Module) 패턴

코드를 최대한 재사용 가능하게 분할 하는 것

`export` 키워드를 통해 변수나 함수를 접근할 수 있게 하고, `import` 키워드를 통해 외부 모듈의 기능을 가져올 수 있다.

html에서 `<script type="module"></script>` 와 같이 속성 설정을 통해 스크립트가 모듈이라는 것을 알 수 있게 해주어야한다. 브라우저가 자동으로 모듈을 가져온 후 이를 실행하게 된다.

### module로 실행했을 경우의 특징

- 항상 엄격 모드(use strict)로 실행이 된다.
- 지연 실행된다.
- 인라인 모듈 스크립트도 비동기 처리를 할 수 있다.
- 외부 오리진에서 스크립트를 불러오려면 Cors 헤더가 있어야한다.
- 중복된 스크립트는 무시된다.
- 파일 안의 특정 모듈안에 자신만의 스코프가 만들어진다. 그래서 모듈 내부에서 정의한 변수 및 함수를 다른 스크립트에서 접근할 수 없다.
- 동일한 모듈을 다른 곳에서 여러번 사용하더라도 모듈은 최초 호출될때 한번만 실행되게 된다.
- 모듈은 단 한번만 실행되고 실행된 모듈은 필요한 곳에 공유되므로 어느 한 모듈에서 a 객체를 수정하면 다른 모듈에서도 변경사항을 확인할 수 있다.

### 지연 실행

보통 스크립트에서는 지연 실행을 하려면 defer 속성을 붙여줘야하는데, module 스크립트는 defer 속성 없이도 지연 실행을 하게된다.

외부 모듈 스크립트를 다운로드 할때 브라우저 HTML 처리가 멈추지 않는다. 스크립트는 HTML 문서가 준비가 완료되면 그 후에 실행되어진다.

```html
<body>
	<script type="module"> 
		alert(typeof button); <!-- object -->
	</script>
	
	<script>
		alert(typeof button); <!-- undefined -->
	</script>
	<button id="button">Button</button>
</body>
```

모듈이 타입인 경우 HTML 요소가 모두 로드 된후에 object가 나오고, 스크립트의 경우 HTML 처리가 되기 전에 실행되므로 undefined가 나온다.

### 스크립트 비동기 처리

일반 스크립트에서 async

- 외부 스크립트를 불러올 때만 유효하다.
- 스크립트 로딩이 끝나면 다른 스크립트나 HTML 문서 처리를 기다리지 않고 바로 실행이 된다.

모듈 스크립트에서 async

- 외부 스크립트 불러올때만 아니라 인라인 스크립트에도 적용이 가능하다.
- 인라인 스크립트에 async가 붙었기에 다른 스크립트나 HTML 문서 처리를 기다리지 않고 바로 실행된다.

인라인 스크립트 : 외부 파일(.js)과 연결하지 않고 태그 안에 코드를 적는 것

`<script> 코드 </script>`

### nomodule

구형 브라우저에서는 type=”module”을 해석하지 못한다.

그래서 모듈 타입 스크립트를 만나면 무시하고 넘어가게 되므로 nomodule 속성을 이용해서 구형 브라우저에 대비할 수 있다.

```html
<scirpt nomodule>
	alert("구형 브라우저, 모듈 스크립트 사용불가");
</script>
```