<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lazy-loading</title>
</head>
<body>
    <img src="https://via.placeholder.com/400x300" data-src="https://images.pexels.com/photos/20985362/pexels-photo-20985362.jpeg?auto=compress&cs=tinysrgb&w=600&lazy=load">
    <img src="https://via.placeholder.com/400x300" data-src="https://images.pexels.com/photos/20985362/pexels-photo-20985362.jpeg?auto=compress&cs=tinysrgb&w=600&lazy=load">
    <img src="https://via.placeholder.com/400x300" data-src="https://images.pexels.com/photos/20985362/pexels-photo-20985362.jpeg?auto=compress&cs=tinysrgb&w=600&lazy=load">
    <img src="https://via.placeholder.com/400x300" data-src="https://images.pexels.com/photos/20985362/pexels-photo-20985362.jpeg?auto=compress&cs=tinysrgb&w=600&lazy=load">
    <img src="https://via.placeholder.com/400x300" data-src="https://images.pexels.com/photos/20985362/pexels-photo-20985362.jpeg?auto=compress&cs=tinysrgb&w=600&lazy=load">
    <img src="https://via.placeholder.com/400x300" data-src="https://images.pexels.com/photos/20985362/pexels-photo-20985362.jpeg?auto=compress&cs=tinysrgb&w=600&lazy=load">
    <img src="https://via.placeholder.com/400x300" data-src="https://images.pexels.com/photos/20985362/pexels-photo-20985362.jpeg?auto=compress&cs=tinysrgb&w=600&lazy=load">
    <img src="https://via.placeholder.com/400x300" data-src="https://images.pexels.com/photos/20985362/pexels-photo-20985362.jpeg?auto=compress&cs=tinysrgb&w=600&lazy=load">
    <script>
        const observer=new IntersectionObserver(function(entries,observer){
            entries.forEach(entry=>{
                if(entry.isIntersecting){
                    entry.target.src=entry.target.dataset.src; // 이미지가 화면에 들어오면 data-src의 값을 src로 넣어줌

                    observer.unobserve(entry.target); // 이미지가 로드되면 관찰을 멈춤
                }
            })
        },{threshold:0.1});

        const imgs=document.querySelectorAll('img');
        imgs.forEach(img=>{
            observer.observe(img);
        });
    </script>
</body>
</html>